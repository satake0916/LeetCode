class Solution{
    public List<List<Integer>> combinationSum(int[] candidates, int target){
        List<List<Integer>> ans = new ArrayList<>();
        List<Integer> cur = new ArrayList<>();
        rec(ans, cur, candidates, 0, target);
        return ans;
    }
    
    private void rec(List<List<Integer>> ans, List<Integer> cur, int[] nums, int now, int rest){
        if(rest == 0){
            ans.add(new ArrayList<Integer>(cur));
            cur.clear();
            return;
        }
        
        if(rest < 0 || now >= nums.length){
            cur.clear();
            return;
        }
        
        if(nums[now] <= rest){
            List<Integer> next = new ArrayList<>(cur);
            next.add(nums[now]);
            rec(ans, next, nums, now, rest-nums[now]);
        }
        rec(ans, cur, nums, now+1, rest);
    }
    
}
